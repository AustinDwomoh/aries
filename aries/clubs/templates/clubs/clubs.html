{% extends "base.html" %}
{% block title %}
Clubs
{% endblock %}
{% block content %}


<style>
  /* Optional: Smooth transition for content change */
  .content-section {
      display: none;
      transition: opacity 0.5s ease-in-out;
  }

  .active-content {
      display: block;
      opacity: 1;
  }
</style>
<div class="container">
  <div class="row align-items-center"> 
    <h2 class="text-center">Clans</h2>
      <form method="GET" action="{% url 'clubs-home' %}" class="mb-4">
        <div class="d-flex justify-content-between">
          <input type="text" name="q" class="form-control" placeholder="Search for a clan..." value="{{ query }}">
          <button type="submit" class="btn btn-primary mx-2">Search</button>
        </div>
      </form>
  </div>
</div>
{% if no_results %}
        <div class="alert alert-warning text-center" role="alert">
          No Clan found for "{{ query }}". Please try a different search term.
        </div>
      {% endif %}
<div class="container-fluid my-4">
  <div class="row">
      {% for clan in clans %}
      <div class="col-md-4">
        <a href="{% url 'clan_details' clan.id %}">
          <!-- Player Card -->
          <div class="card my-3">
              <div class="card-body text-center" style="background-image: url('{{ clan.clan_profile_pic.url }}');background-size: cover; background-position: center;text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);color:white">
                  <img src="{{ clan.clan_logo.url }}" alt="{{ player.username }}'s avatar" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px;" loading="lazy">
                  <h5 class="card-title">{{ clan.clan_name }}</h5>
                  <p>{{ clan.primary_game }}|{{ clan.country }} </p>
                  {% if match_results %}
                      <p>
                          {% for result in match_results %}
                              <span class="badge {% if result == 'W' %}bg-success{% elif result == 'L' %}bg-danger{% else %}bg-warning{% endif %} ">
                                  {% if result == 'W' %}
                                      W
                                  {% elif result == 'L' %}
                                      L
                                  {% else %}
                                      D
                                  {% endif %}
                              </span>
                          {% endfor %}
                      </p>
                      {% endif %}
                  <p class="card-text">
                      <div class="d-flex justify-content-between text-center ">
                          <div class="mx-2">
                            <p class="mb-1 h6 text-primary">{{ clan.stat.win_rate }}%</p>
                            <p class="small  mb-0">Win Rate</p>
                          </div>
                          <div class="mx-2">
                            <p class="mb-1 h6 text-success">{{ clan.stat.total_matches }}</p>
                            <p class="small  mb-0">Matches</p>
                          </div>
                          <div class="mx-2">
                            <p class="mb-1 h6 text-warning">{{ clan.stat.ranking }}</p>
                            <p class="small  mb-0">Rank</p>
                        </div>
                        {% if clan.is_recruiting %}
                        <div class="mx-2">
                          <p class="mb-1 h6 text-warning">{{ clan.is_recruiting }}</p>
                          <p class="small  mb-0">Recruitment</p>
                      </div>
                      {% endif %}
                  </div>
                  </p>
              </div>
          </div>
        </a></div>
    
      {% endfor %}
      
    </div>
</div>
  {% endblock %}
