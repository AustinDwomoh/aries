{% load static %} 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--bootstrap css--> 
    <link rel="manifest" href="{% static 'images/site.webmanifest' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <!--icons-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="apple-touch-icon" sizes="180x180" href="{% static 'images/favicon/apple-touch-icon.png' %}">
    <link rel="icon" type="image/png" sizes="32x32" href="{% static 'images/favicon/favicon-32x32.png' %}">
    <link rel="icon" type="image/png" sizes="16x16" href="{% static 'images/favicon/favicon-16x16.png' %}">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">{% comment %} this is for the animations {% endcomment %} 
    <link rel="icon" href="{% static 'images/favicon/favicon.ico' %}">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="{% static "css/style.css" %}">
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6095628428301944"
     crossorigin="anonymous"></script>
    <title>{% block title %}Aries{% endblock %}</title>
    <style>
        a{
            text-decoration:none
        }
    </style>
    <div>
      <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
      <script>
        // Initialize AOS (Animate On Scroll) library for smooth animations
        AOS.init({
          easing: 'ease-in-out',   // animation easing
          once: true,              // animate elements only once on scroll
          delay: 200               // global delay before animation starts
        });
      </script>

      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>

      <script>
        // Handle follow/unfollow button clicks via event delegation
        document.addEventListener('click', function (e) {
          if (!e.target.classList.contains('follow-btn')) return;

          const button = e.target;
          const followedId = button.dataset.id;
          const followedModel = button.dataset.model;
          // Determine action by button text
          const action = button.innerText.trim().toLowerCase() === "follow" ? "follow" : "unfollow";

          fetch(`/follow/${action}/${followedModel}/${followedId}/`)
            .then(response => response.json())
            .then(data => {
              // Toggle button text based on action
              button.innerText = action === "follow" ? "Unfollow" : "Follow";

              // Display message next to button
              const messageBox = button.nextElementSibling;
              messageBox.innerText = data.context.message;
              messageBox.style.display = "block";

              // Reload page to reflect changes (could be optimized to avoid full reload)
              location.reload();  
            });
        });
      </script>

      <script>
        // Submit logout form when logout link clicked (prevents default link behavior)
        document.getElementById("logout-link")?.addEventListener("click", function (event) {
          event.preventDefault();
          document.getElementById("logout-form").submit();
        });
      </script>

      <script>
        // Show Bootstrap modal if there are any Django messages on page load
        document.addEventListener("DOMContentLoaded", function () {
          var hasMessages = {{ messages|length|yesno:"true,false" }};
          if (hasMessages) {
            var messageModal = new bootstrap.Modal(document.getElementById('messageModal'));
            messageModal.show();
          }
        });
      </script>

      <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

      <script>
        // Capture and download a screenshot of a section as PNG
        function captureSection(sectionId) {
          let section = document.querySelector(sectionId);
          if (!confirm("Do you want save?")) return;
          if (!section) {
            alert("Section not found!");
            return;
          }

          // Hide all buttons temporarily to avoid capturing them
          let btns = document.querySelectorAll('.btn');
          btns.forEach(btn => btn.style.display = "none");

          // Temporarily adjust styles for clean capture
          section.style.backgroundColor = "#ffffff";
          section.style.border = "5px solid black";

          html2canvas(section, {
            scale: 3,   // High resolution
            useCORS: true
          }).then(canvas => {
            let imgURL = canvas.toDataURL("image/png");

            // Trigger download
            let downloadLink = document.createElement("a");
            downloadLink.href = imgURL;
            downloadLink.download = sectionId.replace("#", "") + ".png";
            downloadLink.click();

            // Revert styles
            btns.forEach(btn => btn.style.display = "");
            section.style.backgroundColor = "";
            section.style.border = "";
          });
        }
      </script>

    </div>
</head>
<body style='color:#212121;background-color: #E0E0E0' >
  <header>
    <nav class="navbar navbar-expand-lg fixed-top bg-light navbar-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="{% url 'Home' %}">
          <img src="{% static 'images/areis-1.png' %}" alt="images/areis Logo" draggable="false" height="50" />
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item"><a class="nav-link mx-2" href="{% url 'Home' %}">Home</a></li>
            <li class="nav-item"><a class="nav-link mx-2" href="{% url 'clan_home' %}">Clan</a></li>
            <li class="nav-item"><a class="nav-link mx-2" href="{% url 'gamers' %}">Gamers</a></li>
            <li class="nav-item"><a class="nav-link mx-2" href="{% url 'tournament-home' %}">Tournament</a></li>
            <li class="nav-item"><a class="nav-link mx-2" href="{% url 'About' %}">About</a></li>

            {% if is_user_authenticated or is_clan_authenticated %}
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown"
                  aria-expanded="false">
                    <img src="{{ profile_pic_url }}" alt="Profile Pic" class="rounded-circle"
                    style="width: 30px; height: 30px;">
                </a>
                  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
                    {% if is_user_authenticated %}
                      <li><a class="dropdown-item" href="{% url 'user-home' %}">User Profile</a></li>
                      <li><a class="dropdown-item" href="{% url 'edit_profile' %}">Edit Profile</a></li>
                    {% elif is_clan_authenticated %}
                      <li><a class="dropdown-item" href="{% url 'clan_dashboard' %}">Clan Dashboard</a></li>
                       <li><a class="dropdown-item" href="{% url 'edit_clan_profile' %}">Edit Clan</a></li>
                    {% endif %}
                    <li><a class="dropdown-item" href="{% url 'logout' %}" id="logout-link">Log Out</a></li>
                  </ul>
              </li>
            {% else %}
              <li class="nav-item">
                <a class="nav-link d-inline" href="{% url 'register' %}">Sign Up</a>
                <a class="nav-link d-inline" href="{% url 'login' %}">Log In</a>
              </li>
            {% endif %}
          </ul>
        </div>
      </div>

      <form method="post" action="{% url 'logout' %}" id="logout-form" style="display: none;">
        {% csrf_token %}
      </form>
    </nav>
  </header>

    <!-- Modal -->

    <div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          {% if messages %}
            {% for message in messages %}
              <div class="modal-header bg-{{ message.tags }}">
                <h5 class="modal-title" id="messageModalLabel">{{ message.tags|title }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                {{ message }}
              </div>
            {% endfor %}
          {% endif %}
        </div>
      </div>
    </div>
    <div style="padding-top:80px;">
    {% block content %}{% endblock %}  <!-- your page content -->
    </div>

<footer class="text-center text-lg-start text-white" style="background-color: #101e14;bottom:0">
    <div class="container p-4 pb-0">
        <section>
        <div class="row">
            <div class="col-lg-4 col-md-6 mb-4 mb-md-0">
                <h5 class="text-uppercase">ARIES</h5>
                <p>"Imagination is the gateway to creation, where dreams take shape and reality begins."</p>
                <p>Guided by the spirit of Aries, where creativity fuels progress, and gamers forge their legacy.</p>
            </div>
            <div class="col-lg-2 col-md-6 mb-4 mb-md-0">
                <h5 class="text-uppercase">Important Links</h5>
                <ul class="list-unstyled mb-0">
                <li><a class="text-white" href="{% url 'Home' %}">Home</a></li>
                <li><a class="text-white" href="{% url 'clan_home' %}">Clan</a></li>
                <li><a class="text-white" href="{% url 'tournament-home'%}">Tournament</a></li>
                <li><a class="text-white" href="{% url 'gamers' %}">Gamers</a></li>
                <li><a class="text-white" href="{% url 'About' %}">About</a></li>
                </ul>
            </div>
            <div class="col-lg-2 col-md-6 mb-4 mb-md-0">
                <h5 class="text-uppercase text-center">Join Us</h5>
                <ul class="list-unstyled mb-0 text-center">
                <li><a class="text-white" href="{% url 'register' %}">Sign Up</a></li>
                <li><a href="{% url 'login' %}" class="text-white">Log In</a></li>
                <li><a href="{% url 'clan_register' %}" class="text-white">Register Clan</a></li>
                </ul>
            </div>

            <div class="col-lg-4 col-md-4 mb-4 mb-md-0">
                <h5 class="text-uppercase text-center">Follow Us</h5>
                <section class="mb-4 text-center">
                    <a class="btn btn-outline-light btn-floating m-1" href="https://austindwomoh.xyz/" role="button"><i class="bi bi-google"></i></a>
                    <a class="btn btn-outline-light btn-floating m-1" href="https://www.instagram.com/inphinithy1/" role="button"><i class="bi bi-instagram"></i></a>
                    <a class="btn btn-outline-light btn-floating m-1" href="https://www.linkedin.com/in/austin-dwomoh/" role="button"><i class="bi bi-linkedin"></i></a>
                    <a class="btn btn-outline-light btn-floating m-1" href="https://github.com/INPHINITHY" role="button"><i class="bi bi-github"></i></a>
                    <a class="btn btn-outline-light btn-floating m-1" href="https://discord.gg/AD8YxbZ8" role="button"><i class="bi bi-discord"></i></a>
                </section>
            </div>
        </div>
        </section>
        <hr class="mb-4" />
        {% comment %} Icons {% endcomment %}
    </div>
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
    <P>© {% now "Y" %} Developed: <a class="text-white" href="https://austindwomoh.xyz/">Inphinthy</a></p>
    </div>
</footer>


</body>

</html>

