{% extends "base.html" %}
{% load static %}
{% block title %} Gamers {% endblock title %}
{% block content %}
<div class="container-fluid my-4">
    <h2 class="text-center">All Players</h2>
    <div class="row">
        {% for player in players %}
        <div class="col-md-4">
            <!-- Player Card -->
            <a href="{% url 'player_details' player.id %}">
            <div class="card my-3">
                <div class="card-body text-center" style="background-image: url('{{ player.profile.clan.clan_profile_pic.url }}');background-size: cover; background-position: center;text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);color:white">
                    <!-- Avatar -->
                    {% if player.profile.profile_picture %}
                    <img src="{{ player.profile.profile_picture.url }}" alt="{{ player.username }}'s avatar" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px;">
                    {% endif %}

                    <!-- Player Name -->
                    <h5 class="card-title">{{ player.username }}</h5>
                    <p>{{ player.profile.clan.clan_name }} </p>
                    {% if match_results %}
                        <p>
                            {% for result in match_results %}
                                <span class="badge {% if result == 'W' %}bg-success{% elif result == 'L' %}bg-danger{% else %}bg-warning{% endif %} ">
                                    {% if result == 'W' %}
                                        W
                                    {% elif result == 'L' %}
                                        L
                                    {% else %}
                                        D
                                    {% endif %}
                                </span>
                            {% endfor %}
                        </p>
                        {% endif %}
                    <p class="card-text">
                        <div class="d-flex justify-content-between text-center ">
                            <div class="mx-2">
                              <p class="mb-1 h6 text-primary">{{ player.profile.stats.win_rate }}%</p>
                              <p class="small  mb-0">Win Rate</p>
                            </div>
                            <div class="mx-2">
                              <p class="mb-1 h6 text-success">{{ player.profile.stats.games_played }}</p>
                              <p class="small  mb-0">Matches</p>
                            </div>
                            <div class="mx-2">
                              <p class="mb-1 h6 text-warning">{{ player.profile.stats.rank }}</p>
                              <p class="small  mb-0">Rank</p>
                        </div>
                    </div>
                    </p>
                </div>
            </div>
        </a></div>
        {% endfor %}
    </div>
</div>

{% endblock content %}

