{% extends "base.html" %}
{% block title %}
Tournaments
{% endblock title %}
{% block content %}
<style>
    /* Optional: Smooth transition for content change */
    .content-section {
        display: none;
        transition: opacity 0.5s ease-in-out;
    }

    .active-content {
        display: block;
        opacity: 1;
    }
</style>
<nav class="navbar navbar-expand-lg bg-light navbar-light" style="margin-top:-9px;padding:-10px">
    <div class="container-fluid">
        <ul class="list-inline d-flex justify-content-end w-100">
            <li class="list-inline-item mx-2">
                <a class="nav-link mini-nav active  fw-bold" href="#" data-target="#section1">Clan</a>
            </li>
            <li class="list-inline-item mx-2">
                <a class="nav-link mini-nav  fw-bold" href="#" data-target="#section2">Individuals</a>
            </li>
        </ul>
    </div>
</nav>

<!-- Content Sections -->
<div id="section1" class="content-section active-content text-center">
    <div class="container-fluid my-4">
        <div class="container">
            <div class="row align-items-center"> 
            <h2 class="text-center">CVC Tournaments</h2>
            <form method="GET" action="{% url 'tournament-home' %}" class="mb-4 d-flex justify-content-center">
                <input type="text" name="q" class="form-control w-50" placeholder="Search for a player..." value="{{ query }}">
                <button type="submit" class="btn btn-primary mx-2">Search</button>
                <a href="{%url 'create_indi_tournament' %}" class="btn btn-primary">Create</a>
            </form>
            </div>
        </div>
    </div>
        {% if no_results_cvc %}
        <div class="alert alert-warning" role="alert">
            No CVC tournaments found for "{{ query }}". Please try a different search term.
        </div>
        {% endif %}
        <div class="row">
            {% for tours in cvc_tournaments %}
            <div class="col-md-4">
                <!-- Player Card -->
                <a href="{% url 'cvc_details' tours.id %}">
                <div class="card my-3">
                    <div class="card-body text-center" >
                        <div class="card-body text-center"  style="background-image: url('{{ tours.created_by.profile.profile_picture.url  }}');background-size: cover; background-position: center;text-shadow: 2px 2px 4px rgba(0, 0, 0,1);color:white">
                            <img src="{{  tours.logo.url }}" alt="{{  tours.name }}'s avatar" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px;">
                        <!-- Player Name -->
                        <h5 class="card-title">{{ tours.name }}</h5>
                        <p class="card-text">
                            <div class="d-flex justify-content-between text-center ">
                                <div class="mx-2">
                                  <p class="mb-1 h6 text-success">{{tours.created_by }}</p>
                                  <p class="small  mb-0">Creator</p>
                                </div>
                                <div class="mx-2">
                                  <p class="mb-1 h6 text-warning">{{ tours.teams.count }}</p>
                                  <p class="small  mb-0">Clans</p>
                            </div>
                        </div>
                        </p>
                    </div>
                    </div>
                </div>
            </a></div>
            {% endfor %}
        </div>
    </div>
</div>
<div id="section2" class="content-section" >
    <div class="container-fluid my-4 text-center">
        <div class="container">
            <div class="row align-items-center"> 
            <h2 class="text-center">Indi Tournaments</h2>
            <form method="GET" action="{% url 'tournament-home' %}" class="mb-4 d-flex justify-content-center">
                <input type="text" name="q" class="form-control w-50" placeholder="Search for a player..." value="{{ query }}">
                <button type="submit" class="btn btn-primary mx-2">Search</button>
                <a href="{%url 'create_indi_tournament' %}" class="btn btn-primary">Create</a>
            </form>
            </div>
        </div>
    </div>
        {% if no_results_indi  %}
        <div class="alert alert-warning" role="alert">
            No CVC tournaments found for "{{ query }}". Please try a different search term.
        </div>
        {% endif %}
        <div class="row">
            {% for tours in indi_tournaments %}
            <div class="col-md-4">
                <a href="{% url 'indi_details' tours.id %}">
                <div class="card my-3">
                    <div class="card-body text-center"  style="background-image: url('{{ tours.created_by.profile.profile_picture.url }}');background-size: cover; background-position: center;text-shadow: 2px 2px 4px rgba(0, 0, 0, 1);color:white"  >
                        <img src="{{  tours.logo.url }}" alt="{{  tours.name }}'s avatar" class="img-fluid rounded-circle mb-3" style="width: 100px; height: 100px;">
                        <h5 class="card-title">{{ tours.name }}</h5>
                        <p class="card-text">
                            <div class="d-flex justify-content-between text-center ">
                                <div class="mx-2">
                                  <p class="mb-1 h6 text-success">{{tours.created_by }}</p>
                                  <p class="small  mb-0">Host</p>
                                </div>
                                <div class="mx-2">
                                  <p class="mb-1 h6 text-warning">{{ tours.players.count }}</p>
                                  <p class="small  mb-0">Teams</p>
                            </div>
                        </div>
                        </p>
                    </div>
                </div>
            </a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<script>
    // JavaScript to handle active link switching and content change
    const navLinks = document.querySelectorAll('.mini-nav');
    const contentSections = document.querySelectorAll('.content-section');

    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault(); 
            navLinks.forEach(item => item.classList.remove('active'));

        
            link.classList.add('active');
            const target = link.getAttribute('data-target');

            // Hide all sections
            contentSections.forEach(section => section.classList.remove('active-content'));

            // Show the selected section
            const targetSection = document.querySelector(target);
            targetSection.classList.add('active-content');
        });
    });
</script>
{% endblock content %}